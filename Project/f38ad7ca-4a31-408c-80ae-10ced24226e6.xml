{"CLs":[{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Type":"ANY","Var":"1"}],"Ix":2,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":1,"Type":"ANY","Var":"AZD_SetOpMode"}]}],"CMT":"Set Opmode = 1 (Profile Position)","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"ST","Var":"AZD_CW_OMS2"}],"CMT":"Set OMS2 (change set immediately)","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Not":true,"Var":"StopAGV"},{"__type":"LD","Not":true,"Var":"SpinStateActive","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Tracking_ControlOutput"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"0"}],"Ix":6,"Name":"<","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"ANY","Var":"Steering_RightPos"}],"Ix":7,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":5,"Type":"ANY","Var":"AZD_SetPos"}],"X":3}],"CMT":"Set steering angle depending on turn direction\u000d\u000a","LRI":8,"RRI":9,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Not":true,"Var":"StopAGV"},{"__type":"LD","Not":true,"Var":"SpinStateActive","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Tracking_ControlOutput"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"0"}],"Ix":7,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":2,"Type":"ANY","Var":"Steering_LeftPos"}],"Ix":6,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":3,"Type":"ANY","Var":"AZD_SetPos"}],"X":3}],"LRI":8,"RRI":9,"VLs":[]}
{"CLs":[{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Type":"ANY_ELEMENTARY(except BOOL)","Var":"AZD_ActPos"},{"__type":"PRM","Arg":"In2","Ix":1,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"LeftDiffThreshold"}],"Ix":6,"Name":"<","Out":[{"__type":"PF","Arg":""}],"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":2,"Type":"ANY","Var":"InsideWheelTorque"}],"Ix":7,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":3,"Type":"ANY","Var":"Drive2.TqLim"}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"ANY","Var":"OutsideWheelTorque"}],"Ix":8,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":5,"Type":"ANY","Var":"Drive1.TqLim"}],"X":2}],"CMT":"#Drop torque on inside wheel as quick & dirty differential\u000d\u000aLeft turn - drop left wheel torque","LRI":9,"RRI":10,"VLs":[]}
{"CLs":[{"__type":"LD","Not":true,"Var":"SpinStateActive"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"AZD_ActPos"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"LeftCenterDiffThreshold"}],"Ix":9,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"AZD_ActPos"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"RightCenterDiffThreshold"}],"Ix":10,"Name":"<","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":7,"Type":"ANY","Var":"OutsideWheelTorque"}],"Ix":12,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":8,"Type":"ANY","Var":"Drive1.TqLim"}],"X":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":5,"Type":"ANY","Var":"OutsideWheelTorque"}],"Ix":11,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":6,"Type":"ANY","Var":"Drive2.TqLim"}],"X":4}],"CMT":"Center - full torque both sides","LRI":13,"RRI":14,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"SpinStateActive"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":1,"Type":"ANY","Var":"SSWheelTorque"}],"Ix":5,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":2,"Type":"ANY","Var":"Drive1.TqLim"}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":3,"Type":"ANY","Var":"SSWheelTorque"}],"Ix":6,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":4,"Type":"ANY","Var":"Drive2.TqLim"}],"X":2}],"LRI":7,"RRI":8,"VLs":[]}
{"CLs":[{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Type":"ANY_ELEMENTARY(except BOOL)","Var":"AZD_ActPos"},{"__type":"PRM","Arg":"In2","Ix":1,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"RightDiffThreshold"}],"Ix":6,"Name":">","Out":[{"__type":"PF","Arg":""}],"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":2,"Type":"ANY","Var":"InsideWheelTorque"}],"Ix":7,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":3,"Type":"ANY","Var":"Drive1.TqLim"}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"ANY","Var":"OutsideWheelTorque"}],"Ix":8,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":5,"Type":"ANY","Var":"Drive2.TqLim"}],"X":2}],"CMT":"Right turn - drop right wheel torque","LRI":9,"RRI":10,"VLs":[]}
{"CLs":[{"__type":"LD","Not":true,"Var":"SpinStateActive"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_NUM","Var":"Tracking_ControlOutput"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_NUM","Var":"StepperScale"}],"Ix":8,"Name":"MUL","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":3,"Type":"ANY_NUM","Var":"StepperSpeed"}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":6,"Type":"ANY_NUM","Var":"StepperSpeed"}],"Ix":10,"Name":"ABS","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":7,"Type":"ANY_NUM","Var":"StepperSpeed"}],"X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"REAL","Var":"StepperSpeed"}],"Ix":9,"Name":"REAL_TO_DINT","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":5,"Type":"DINT","Var":"AZD_SetVel"}],"X":3}],"CMT":"Set steering speed from PID output","LRI":11,"RRI":12,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"SpinStateActive"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_NUM","Var":"Tracking_ControlOutput"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_NUM","Var":"SS_StepperScale"}],"Ix":8,"Name":"MUL","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":3,"Type":"ANY_NUM","Var":"StepperSpeed"}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":6,"Type":"ANY_NUM","Var":"StepperSpeed"}],"Ix":10,"Name":"ABS","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":7,"Type":"ANY_NUM","Var":"StepperSpeed"}],"X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"REAL","Var":"StepperSpeed"}],"Ix":9,"Name":"REAL_TO_DINT","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":5,"Type":"DINT","Var":"AZD_SetVel"}],"X":3}],"CMT":"Set steering speed from PID output","LRI":11,"RRI":12,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"AZD_SW_OMS1"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":1,"Type":"ANY","Var":"TempSetPos"}],"Ix":5,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":2,"Type":"ANY","Var":"PrevSetPos"}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":3,"Type":"ANY","Var":"tempSetVel"}],"Ix":6,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":4,"Type":"ANY","Var":"PrevSetVel"}],"X":2}],"CMT":"Store last values accepted by drive","LRI":7,"RRI":8,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Not":true,"Var":"SteerDriveInhibit"},{"__type":"LD","Var":"AZD_SW_OE","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":8,"Type":"TIME","Var":"T#0.25s"}],"Ix":14,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":9,"Type":"TIME","Var":"SDTim"}],"X":2,"Var":"sdtimer"},{"__type":"LD","Ix":2,"Not":true,"Var":"AZD_SW_OMS1","X":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"AZD_SetPos"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY, ENUM","Var":"PrevSetPos"}],"Ix":15,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":4},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":6,"Type":"ANY_ELEMENTARY, ENUM","Var":"AZD_SetVel"},{"__type":"PRM","Arg":"In2","Ix":7,"Type":"ANY_ELEMENTARY, ENUM","Var":"PrevSetVel"}],"Ix":16,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":4,"Y":1},{"__type":"ST","Ix":3,"Var":"AZD_CW_OMS1","X":5},{"__type":"F","In":[{"__type":"PF","Arg":"In"}],"Ix":19,"Name":"Up","Out":[{"__type":"PF","Arg":""}],"X":5,"Y":1,"Id":"1f1d311b-b0b7-461e-b3c3-44ae00000b52"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":10,"Type":"ANY","Var":"AZD_SetPos"}],"Ix":17,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":11,"Type":"ANY","Var":"TempSetPos"}],"X":6,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"In"}],"Ix":20,"Name":"Up","Out":[{"__type":"PF","Arg":""}],"X":5,"Y":2,"Id":"1f1d311b-b0b7-461e-b3c3-44ae00000c1b"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":12,"Type":"ANY","Var":"AZD_SetVel"}],"Ix":18,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":13,"Type":"ANY","Var":"tempSetVel"}],"X":6,"Y":2},{"__type":"HL","X":6}],"CMT":"Tell drive about new setpoints when desired values differ from last write","LRI":21,"RRI":22,"VLs":[{"Ix":23,"X":4},{"Ix":24,"X":5},{"Ix":24,"X":5,"Y":1}]}
{"CLs":[{"__type":"LD","Ix":1,"Not":true,"Var":"SpinPause"},{"__type":"LD","Ix":3,"Var":"TrackLost","Y":1},{"__type":"LD","Id":"ab3939d5-3d09-47d7-8245-85f70000031a","Up":true,"Var":"AGVStopped","X":1},{"__type":"LD","Ix":2,"Not":true,"Var":"SpinStateActive","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"ANY","Var":"AZD_ActPos"}],"Ix":6,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":5,"Type":"ANY","Var":"AZD_SetPos"}],"X":3}],"CMT":"Tell AZD Drive to retain last position when AGV is stopped OR has lost track. ","LRI":7,"RRI":8,"VLs":[{"Ix":9,"X":1}]}
{"CLs":[{"__type":"LD","Id":"ab3939d5-3d09-47d7-8245-85f7000004a0","Up":true,"Var":"StartPB"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":1,"Type":"ANY","Var":"Steering_Home"}],"Ix":3,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":2,"Type":"ANY","Var":"AZD_SetPos"}],"X":1}],"CMT":"Tell AZD Drive to retain last position when AGV is stopped","LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"1f1d311b-b0b7-461e-b3c3-44ae00000010","Up":true,"Var":"StartPB"},{"__type":"LD","Ix":1,"Var":"AZD_SW_OE","X":1},{"__type":"ST","Ix":2,"Var":"SpinStateReset","X":2}],"LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"SpinStateReset"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":1,"Type":"ANY","Var":"Steering_Home"}],"Ix":3,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":2,"Type":"ANY","Var":"AZD_SetPos"}],"X":1}],"LRI":4,"RRI":5,"VLs":[]}
